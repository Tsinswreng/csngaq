## unicode, utf8, utf16是甚么关系?
[2024-10-17T17:43:17.582+08:00]

Unicode、UTF-8 和 UTF-16 之间的关系可以这样理解：

* **Unicode** 是一种字符集，它为世界上几乎所有语言的字符都分配了一个唯一的数字代码，称为**码点 (code point)**。  你可以把它想象成一个巨大的字符表，每个字符都有一个对应的编号。  Unicode 标准定义了这些码点，但它并没有规定如何将这些码点存储在计算机中。

* **UTF-8** 和 **UTF-16** 都是**编码方案 (encoding)**，它们规定了如何将 Unicode 码点转换成计算机可以理解的二进制数据。  它们是将 Unicode 码点转换为字节序列的具体方法。

**关键区别在于它们如何表示码点：**

* **UTF-8** 使用变长编码。这意味着不同的字符可能占用 1 到 4 个字节。  它对 ASCII 字符（0-127）使用单个字节，与 ASCII 编码兼容，这使得 UTF-8 在处理大量 ASCII 文本时非常高效。对于其他字符，它使用 2、3 或 4 个字节。

* **UTF-16** 使用定长编码（大部分情况下）。大多数字符使用 2 个字节表示，但对于超出基本多语言平面 (BMP) 的字符，则需要使用**代理对 (surrogate pairs)**，即 4 个字节。


**类比说明:**

想象一下，Unicode 就像一本字典，每个单词都有一个唯一的编号（码点）。UTF-8 和 UTF-16 就像两种不同的翻译方法，将字典中的单词编号转换成另一种语言（计算机能理解的二进制数据）。UTF-8 比较灵活，短单词用短的句子表示，长单词用长的句子表示；UTF-16 比较固定，大部分单词用固定长度的句子表示，只有极少数长单词需要用更长的句子表示。


**总结:**

Unicode 定义了字符和它们的码点；UTF-8 和 UTF-16 是将这些码点转换成字节序列的两种不同方法。选择哪种编码取决于具体的应用场景。UTF-8 广泛应用于互联网，因为它与 ASCII 兼容且空间效率高；UTF-16 常用于操作系统和一些编程语言的内部表示，因为它在处理许多常用字符时效率较高。  UTF-32 也是一种 Unicode 编码方案，它使用 4 个字节表示所有字符，简单但空间效率低。


## 代理對
[2024-10-17T17:42:27.275+08:00]
在 Unicode 中，为了表示超过基本多语言平面 (Basic Multilingual Plane, BMP) 的字符，使用了**代理对 (Surrogate Pair)**。

BMP 只能表示 0x0000 到 0xFFFF 之间的字符，也就是 65,536 个字符。然而，Unicode 标准包含了远超过这个数量的字符。为了表示这些超出 BMP 的字符，Unicode 使用了代理对机制。

一个代理对由两个 16 位的代码单元组成：

* **高代理 (High Surrogate):**  位于 U+D800 到 U+DBFF 之间 (1024 个代码点)。
* **低代理 (Low Surrogate):** 位于 U+DC00 到 U+DFFF 之间 (1024 个代码点)。

通过组合高代理和低代理，可以表示 1,048,576 个额外的字符 (1024 * 1024)，从而扩展了 Unicode 的表示范围，覆盖了所有可能的 Unicode 字符 (U+0000 到 U+10FFFF)。

**举个例子:**

假设一个字符的 Unicode 码点是 U+10437 (一个汉字)。这个码点超出了 BMP 的范围。为了在 UTF-16 编码中表示这个字符，Unicode 会将其编码成一个代理对：

* 计算 U+10437 与 U+10000 的差值：0x00437
* 将差值的高 10 位 (0x043) 与高代理的起始值 U+D800 进行或运算，得到高代理：U+D804
* 将差值的低 10 位 (0x7) 与低代理的起始值 U+DC00 进行或运算，得到低代理：U+DC37

因此，U+10437 在 UTF-16 中被表示为代理对 U+D804 U+DC37。  解码时，程序会识别出高低代理对，然后根据公式反算出原始的 Unicode 码点。

**总结:**

代理对是 UTF-16 编码中的一种机制，用于表示超出基本多语言平面 (BMP) 的 Unicode 字符。它由一个高代理和一个低代理组成，两者组合起来表示一个完整的字符。  理解代理对对于正确处理和操作 Unicode 字符至关重要，尤其是在处理不同编码方式的文本时。



#
[2024-12-04T23:13:06.697+08:00_W49-3]

我的avalonia项目、在xxx.Browser文件夾下 運行dotnet run爲甚麼瀏覽器上只有一個Powered by Avalonia頁面、沒顯示MainWindow.axaml的內容? 但是我在xxx.Desktop中運行dotnet run 就有顯示MainWindow.axaml的內容?
##
